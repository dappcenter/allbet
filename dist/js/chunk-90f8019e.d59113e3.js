(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-90f8019e"],{"0da4":function(t,e,n){"use strict";var a=n("3d92"),s=n.n(a);s.a},"23c2":function(t,e,n){},"30c9":function(t,e,n){"use strict";var a=n("481b"),s=n.n(a);s.a},"3d92":function(t,e,n){},"481b":function(t,e,n){},"4f25":function(t,e,n){"use strict";var a=n("a651"),s=n.n(a);s.a},"5c72":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"module-preview"},[n("div",{staticClass:"ctn ctn1"},[n("h4",[t._v("获胜机会")]),n("h3",[t._v(t._s(this.betInfo.odds)+"%")])]),n("div",{staticClass:"ctn ctn2"},[n("h4",[t._v("赢得投注")]),t._m(0),n("label",{},[t._v("您将赢得"),n("DigitaRoll",{attrs:{value:1.96*this.betInfo.amount}}),t._v("以太幣")],1),n("p",{staticClass:"tip"},[t._v("1% 费用，0.001以太幣累积大奖")])]),n("div",{staticClass:"ctn ctn3"},[n("h4",[t._v("大奖包括")]),n("h3",[n("DigitaRoll",{attrs:{value:888}}),n("i",[t._v("以太幣")])],1),n("label",[t._v("幸运数字是888!")])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",[a("img",{attrs:{src:n("6e8e")}}),t._v("1.96×")])}],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"digital-roll"},[t._v(t._s(t.rollNumber))])},o=[],u=(n("c5f6"),{props:{value:{default:0,type:Number},speed:{default:30,type:Number},time:{default:1500,type:Number},decimal:{default:3,type:Number}},data:function(){return{rollNumber:0,stepSize:.01,timer:null,rollSpace:0}},mounted:function(){this.changeNumber()},watch:{value:function(){this.changeNumber()}},methods:{changeNumber:function(){var t=this;clearInterval(this.timer),this.rollSpace=Math.abs(this.value-this.rollNumber),this.stepSize=this.rollSpace/this.time*this.speed<.001?.001:this.rollSpace/this.time*this.speed,this.value>this.rollNumber?this.timer=setInterval(function(){t.rollNumber=(Number(t.rollNumber)+t.stepSize).toFixed(t.decimal),t.rollNumber>=t.value&&(clearInterval(t.timer),t.timer=null,t.rollNumber=t.value.toFixed(t.decimal))},this.speed):this.value<this.rollNumber?this.timer=setInterval(function(){t.rollNumber=(Number(t.rollNumber)-t.stepSize).toFixed(t.decimal),t.rollNumber<=t.value&&(clearInterval(t.timer),t.timer=null,t.rollNumber=t.value.toFixed(t.decimal))},this.speed):this.rollNumber=this.value}}}),l=u,r=(n("30c9"),n("2877")),c=Object(r["a"])(l,i,o,!1,null,null,null);c.options.__file="digitalRoll.vue";var p=c.exports,d={props:["betInfo"],data:function(){return{}},mounted:function(){},components:{DigitaRoll:p}},m=d,f=(n("4f25"),Object(r["a"])(m,a,s,!1,null,null,null));f.options.__file="preview.vue";e["a"]=f.exports},"6cdf":function(t,e,n){},"6e8e":function(t,e,n){t.exports=n.p+"img/gold.f85f418d.png"},7263:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"roller-page"},[n("HeaderBar"),n("div",{staticClass:"main",style:{minHeight:t.$window.innerHeight-150+"px"}},[n("Bet"),n("Record")],1),n("FooterBar")],1)},s=[],i=n("fca0"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"module-bet"},[n("div",{staticClass:"game-content"},[n("div",{staticClass:"ctn-top"},[n("div",{staticClass:"number-show"},[n("div",[n("h3",[t._v(t._s(t.odds))]),n("span",[t._v("预测数")])]),t._m(0)]),n("div",{staticClass:"slider-wrap"},[t._m(1),n("div",{ref:"slider",staticClass:"slider"},[n("div",{ref:"bar",staticClass:"bar"}),n("div",{ref:"handle",staticClass:"handle",on:{mousedown:t.onHandleTouchS}})])])]),n("ul",{staticClass:"ctn-mdl"},[n("li",[n("label",[t._v("赔率")]),n("span",[t._v(t._s(t.peilv))])]),n("li",[n("label",[t._v("收益")]),n("span",[t._v(t._s(Math.floor(1e3*(t.amount*t.peilv-t.amount))/1e3))])]),n("li",[n("label",[t._v("概率")]),n("span",[t._v(t._s(t.odds)+"%")])])]),n("div",{staticClass:"ctn-btm"},[n("h4",[t._v("竞猜数量")]),n("div",{staticClass:"flex-wrap"},[n("div",{staticClass:"hotkeys"},[n("div",{staticClass:"input-wrap"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"number"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),n("span",{staticClass:"add",on:{click:t.onAdd}}),n("span",{staticClass:"minus",on:{click:t.onMinus}})]),n("span",{on:{click:function(e){t.onHotkeys(.05)}}},[t._v("0.05")]),n("span",{on:{click:function(e){t.onHotkeys(.1)}}},[t._v("0.1")]),n("span",{on:{click:function(e){t.onHotkeys(.15)}}},[t._v("0.15")]),n("span",{on:{click:function(e){t.onHotkeys("max")}}},[t._v("MAX")])]),n("button",{staticClass:"enter",on:{click:t.betDo}},[t._v("猜小于"+t._s(t.odds))])]),n("div",{staticClass:"tips"},[n("span",{staticClass:"fl"},[t._v("最小下注数量为 "+t._s(t.rule.minInvest)+" ETH")]),n("span",{staticClass:"fr"},[t._v("建议 Gas Price：9")]),n("span",{staticClass:"fr"},[t._v("余额："+t._s(t.currentAddr.eth)+" ETH")])])])])])},u=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",{staticClass:"green"},[t._v("00")]),n("span",[t._v("幸运数")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scale"},[n("span",[t._v("1%")]),n("span",[t._v("25%")]),n("span",[t._v("50%")]),n("span",[t._v("75%")]),n("span",[t._v("100%")])])}],l=(n("c5f6"),n("c93e")),r=n("2f62"),c=[{constant:!1,inputs:[{name:"rollUnder",type:"uint256"},{name:"modulo",type:"uint256"},{name:"commitLastBlock",type:"uint256"},{name:"commit",type:"uint256"},{name:"sigData",type:"bytes"}],name:"placeBetV1",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_newOwner",type:"address"}],name:"setOwner",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"cfo",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"newCfo",type:"address"}],name:"setCfo",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"kill",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"orderid",type:"uint256"},{name:"blockHash",type:"bytes32"},{name:"random",type:"uint8"}],name:"settleBetV1",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"orderid",type:"uint256"}],name:"getBetInfo",outputs:[{name:"",type:"uint256"},{name:"",type:"uint8"},{name:"",type:"uint8"},{name:"",type:"uint40"},{name:"",type:"address"},{name:"",type:"uint8"},{name:"",type:"uint8"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"orderid",type:"uint256"},{name:"blockHash",type:"bytes32"}],name:"settleBetV2",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"maxProfit",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawFunds",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"lockedInBets",outputs:[{name:"",type:"uint128"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"commit",type:"uint256"}],name:"refundBet",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"rollUnder",type:"uint256"},{name:"modulo",type:"uint256"},{name:"commitLastBlock",type:"uint256"},{name:"commit",type:"uint256"},{name:"sigData",type:"bytes"}],name:"placeBetV2",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_maxProfit",type:"uint256"}],name:"setMaxProfit",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"FailedPayment",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Payment",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"commit",type:"uint256"}],name:"Commit",type:"event"}],p={data:function(){return{amount:.12,odds:2,rule:{},apiHandle:null}},created:function(){var t=this;this.getRule(),setTimeout(function(){t.apiHandle=new t.web3.web3Instance.eth.Contract(c,"0xa3be2b57d1ff838b77875c964e4ee7fb70aaa81d")},2e3)},mounted:function(){this.setBetInfo({diceList:this.diceList,amount:this.amount}),window.onmouseup=function(){window.onmousemove=null},this.setBetInfo({odds:1})},methods:Object(l["a"])({onHotkeys:function(t){this.amount="max"===t?this.rule.maxInvest:t},onAdd:function(){this.amount=(Number(this.amount)+.01).toFixed(2)},onMinus:function(){this.amount=(Number(this.amount)-.01).toFixed(2)}},Object(r["b"])({setBetInfo:"SET_ROLLER_BET_INFO",alert:"alert"}),{onHandleTouchS:function(t){var e=this,n=this.$refs.slider.offsetLeft,a=this.$refs.slider.clientWidth-20,s=t.offsetX,i=0;window.onmousemove=function(t){i=t.clientX-n-s,i=i<=2?2:i>=a?a:i,e.$refs.handle.style.left=i+"px",e.$refs.bar.style.width=i+"px",e.odds=(i/(a/98)).toFixed(2)<2?2:(i/(a/98)).toFixed(),e.setBetInfo({odds:e.odds,amount:e.amount})}},getRule:function(){var t=this;this.$http.get("/app/dice/rule").then(function(e){console.log(e),200==e.code&&(t.rule=e.result)})},betDo:function(){var t=this;this.amount<this.rule.minInvest?this.alert({type:"info",msg:"下注金额不能低于"+this.rule.minInvest+"ETH"}):this.$http.post("/app/dice/dice",{coinAddress:this.currentAddr.coinAddress,coinAmount:this.amount,guessNum:this.odds}).then(function(e){200==e.code&&("DISPATCHER"==e.result.resultType?that.alert({type:"success",msg:e.msg}):t.placeBet(t.odds,100,e.result.commitLastBlock,e.result.commit,e.result.signData,t.amount))})},placeBet:function(t,e,n,a,s,i){var o=this;i=this.web3.web3Instance.utils.toWei(i+"","ether"),console.log(t,e,n,a,s,this.currentAddr.coinAddress),this.apiHandle.methods.placeBetV1(t,e,n,a,s).send({from:this.currentAddr.coinAddress,value:i}).on("receipt",function(t){o.alert({type:"success",msg:"下注成功"})}).on("error",function(t){o.alert({type:"error",msg:"下注失败"})})}}),watch:{diceList:{handler:function(t,e){this.setBetInfo({diceList:t,amount:this.amount})},deep:!0},amount:function(t,e){this.setBetInfo({odds:this.odds,amount:t})}},computed:Object(l["a"])({},Object(r["c"])({web3:function(t){return t.web3Handler.web3},currentAddr:function(t){return t.user.currentAddr}}),{peilv:function(){return Math.floor(98.5/((1*this.odds).toFixed()-1)*1e3)/1e3}})},d=p,m=(n("9f5d"),n("2877")),f=Object(m["a"])(d,o,u,!1,null,null,null);f.options.__file="bet.vue";var v=f.exports,y=n("5c72"),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"module-record"},[n("div",{staticClass:"nav"},[n("a",{class:{active:"RECENT"==t.boardType},attrs:{href:"javascript:;"},on:{click:function(e){t.getData("RECENT")}}},[t._v("最新玩家")]),n("a",{class:{active:"GANGSTER"==t.boardType},attrs:{href:"javascript:;"},on:{click:function(e){t.getData("GANGSTER")}}},[t._v("大佬榜")]),n("a",{class:{active:"LUCKY"==t.boardType},attrs:{href:"javascript:;"},on:{click:function(e){t.getData("LUCKY")}}},[t._v("幸运榜")]),n("a",{class:{active:"ME"==t.boardType},attrs:{href:"javascript:;"},on:{click:function(e){t.getData("ME")}}},[t._v("我的战绩")])]),t._m(0),n("div",{staticClass:"t-body"},t._l(t.recordsList,function(e){return n("ul",{staticClass:"list-content"},[n("li",{},[n("span",[t._v(t._s(t.$fmtDate(e.createTime,"full")))])]),n("li",{staticClass:"user",class:{green:e.odds>t.rule.luckyManOdds,golden:e.coinAmount>t.rule.gangsterAmount}},[n("span",[t._v(t._s(e.coinAddress.replace(/(.{4}).*(.{6})/,"$1....$2")))])]),n("li",{},[n("span",[t._v(t._s(e.coinAmount)+" ETH")])]),n("li",{},[n("span",[t._v(t._s(e.guess))])]),n("li",{},[n("span",[t._v(t._s(e.luckyNum))])]),n("li",{},[n("span",[t._v(t._s(e.odds))])]),n("li",{},[n("span",[t._v(t._s(e.rewards)+" ETH")])]),n("li",{},[n("span",[t._v(t._s(e.abNum)+" AB")])])])}))])},h=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"t-head"},[n("span",[t._v("时间")]),n("span",[t._v("玩家")]),n("span",[t._v("下注数量")]),n("span",[t._v("预测数")]),n("span",[t._v("幸运数")]),n("span",[t._v("赔率")]),n("span",[t._v("奖金")]),n("span",[t._v("AB")])])}],_={data:function(){return{unfold:-1,recordsList:[],boardType:"RECENT",rule:{}}},created:function(){this.getRule(),this.getData("RECENT")},watch:{currentAddr:function(){this.getData(this.boardType)}},computed:Object(l["a"])({},Object(r["c"])({currentAddr:function(t){return t.user.currentAddr}})),methods:{getData:function(t){var e=this;this.boardType=t,this.$http.get("/app/dice/board",{params:{boardType:t,coinAddress:this.currentAddr.coinAddress,page:1,pageSize:10}}).then(function(t){200==t.code&&(e.recordsList=t.result.records.list)})},getRule:function(){var t=this;this.$http.get("/app/dice/rule").then(function(e){200==e.code&&(t.rule=e.result)})}}},g=_,w=(n("85b8"),Object(m["a"])(g,b,h,!1,null,null,null));w.options.__file="record.vue";var C=w.exports,N=n("348c"),x=n("1720"),A={data:function(){return{disabled:!1}},computed:{betInfo:function(){return this.$store.state.roller.betInfo}},components:{HeaderBar:i["a"],FooterBar:N["a"],Bet:v,Preview:y["a"],Record:C,AEFcountDownBtn:x["a"]}},E=A,k=(n("0da4"),Object(m["a"])(E,a,s,!1,null,null,null));k.options.__file="Roller.vue";e["default"]=k.exports},"85b8":function(t,e,n){"use strict";var a=n("23c2"),s=n.n(a);s.a},"9f5d":function(t,e,n){"use strict";var a=n("6cdf"),s=n.n(a);s.a},a651:function(t,e,n){}}]);