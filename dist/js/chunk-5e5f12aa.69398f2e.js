(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e5f12aa"],{"9de7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"account-security"},[a("HeaderBar"),a("div",{staticClass:"main",style:{minHeight:t.$window.innerHeight-150+"px"}},[a("div",{staticClass:"content"},[a("p",{staticClass:"title"},[a("span",[t._v(t._s(t.$t("message.accountSecurity")))]),a("span")]),t.pageData.haveTrustee?a("li",[a("div",[t._v(t._s(t.$t("message.accountPlatform"))+"：")]),a("div",[t._v(t._s(t.currentAddr.userName))])]):a("li",[a("div",[t._v(t._s(t.$t("message.accountPlatform"))+"：")]),a("div",{staticClass:"operation"},[t._v(t._s(t.$t("message.accountNotBound"))),a("span",{on:{click:function(e){t.phoneBind=!0}}},[t._v(t._s(t.$t("message.accountToBound")))])])]),t._l(t.pageData.MetaMaskAddress,function(e){return a("li",[a("div",[t._v(t._s(t.$t("message.accountMetaMaskAddress"))+"：")]),a("div",[t._v(t._s(e.coinAddress))])])}),0==t.pageData.MetaMaskAddress.length&&t.pageData.haveTrustee?a("li",[a("div",[t._v(t._s(t.$t("message.accountMetaMaskAddress"))+"：")]),a("div",[t._v(t._s(t.$t("message.accountBindDesc")))])]):t._e(),t.pageData.haveTrustee?a("li",[a("div",[t._v(t._s(t.$t("message.accountLoginPassword"))+"：")]),a("div",{staticClass:"operation"},[t._v("********"),a("span",{on:{click:function(e){t.resetPassDialog=!0}}},[t._v(t._s(t.$t("message.accountChange")))])])]):a("li",[a("div",[t._v(t._s(t.$t("message.accountChange"))+"：")]),a("div",[t._v(t._s(t.$t("message.accountNotExist")))])])],2)]),a("mu-dialog",{staticClass:"register-accout",attrs:{open:t.phoneBind,"append-body":!1},on:{"update:open":function(e){t.phoneBind=e}}},[a("h4",[t._v(t._s(t.$t("message.PopBindAccount")))]),a("div",{staticClass:"input-wrap"},[a("label",[t._v(t._s(t.$t("message.PopAccount")))]),a("div",{staticClass:"input-flex prefix"},[a("mu-menu",{attrs:{cover:"",open:t.prefixMenu},on:{"update:open":function(e){t.prefixMenu=e}}},[a("span",{attrs:{color:"primary"}},[t._v(t._s(t.formData.prefix))]),a("mu-list",{attrs:{slot:"content"},slot:"content"},t._l(t.prefixs,function(e){return a("mu-list-item",{key:e,attrs:{button:""},on:{click:function(a){t.formData.prefix=e,t.prefixMenu=!1}}},[a("mu-list-item-title",[t._v(t._s(e))])],1)}))],1),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.phone,expression:"formData.phone",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:t.$t("message.PopRegisterPhone")},domProps:{value:t.formData.phone},on:{input:function(e){e.target.composing||t.$set(t.formData,"phone",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})],1)]),a("div",{staticClass:"input-wrap"},[a("label",[t._v(t._s(t.$t("message.PopGraphic")))]),a("div",{staticClass:"input-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.picCode,expression:"formData.picCode"}],attrs:{type:"text",placeholder:t.$t("message.PopGraphicEnter")},domProps:{value:t.formData.picCode},on:{input:function(e){e.target.composing||t.$set(t.formData,"picCode",e.target.value)}}}),a("img",{ref:"imgcode",attrs:{src:t.$window.SERVERPATH+"/open/pic_captcha?type=ACCOUNT_BINDING&macCode=macCode",alt:""},on:{click:function(e){t.getImgCode("ACCOUNT_BINDING")}}})])]),a("div",{staticClass:"input-wrap"},[a("label",[t._v(t._s(t.$t("message.PopCaptcha")))]),a("div",{staticClass:"input-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.captcha,expression:"formData.captcha"}],attrs:{type:"text",placeholder:t.$t("message.PopInputCaptcha")},domProps:{value:t.formData.captcha},on:{input:function(e){e.target.composing||t.$set(t.formData,"captcha",e.target.value)}}}),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.getSMScode("ACCOUNT_BINDING")}}},[t._v(t._s(t.formData.btnText))])])]),a("button",{on:{click:function(e){t.bindingOneDo("PHONE")}}},[t._v(t._s(t.$t("message.PopBindBtn")))]),a("p",[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.phoneBind=!1,t.registerEmailAccount=!0}}},[t._v(t._s(t.$t("message.PopBindEmail")))])])]),a("mu-dialog",{staticClass:"register-accout",attrs:{open:t.registerEmailAccount,"append-body":!1},on:{"update:open":function(e){t.registerEmailAccount=e}}},[a("h4",[t._v(t._s(t.$t("message.PopBindAccount")))]),a("div",{staticClass:"input-wrap"},[a("label",[t._v(t._s(t.$t("message.PopAccount")))]),a("div",{staticClass:"input-flex"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.email,expression:"formData.email",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:t.$t("message.PopRegisterEmail")},domProps:{value:t.formData.email},on:{input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),a("div",{staticClass:"input-wrap"},[a("label",[t._v(t._s(t.$t("message.PopGraphic")))]),a("div",{staticClass:"input-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.picCode,expression:"formData.picCode"}],attrs:{type:"text",placeholder:t.$t("message.PopGraphicEnter")},domProps:{value:t.formData.picCode},on:{input:function(e){e.target.composing||t.$set(t.formData,"picCode",e.target.value)}}}),a("img",{ref:"imgcode",attrs:{src:t.$window.SERVERPATH+"/open/pic_captcha?type=ACCOUNT_BINDING&macCode=macCode",alt:""},on:{click:function(e){t.getImgCode("ACCOUNT_BINDING")}}})])]),a("div",{staticClass:"input-wrap"},[a("label",[t._v(t._s(t.$t("message.PopCaptcha")))]),a("div",{staticClass:"input-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.emailCaptcha,expression:"formData.emailCaptcha"}],attrs:{type:"text",placeholder:t.$t("message.PopInputCaptcha")},domProps:{value:t.formData.emailCaptcha},on:{input:function(e){e.target.composing||t.$set(t.formData,"emailCaptcha",e.target.value)}}}),a("AEFcountDownBtn",{on:{click:function(e){t.getEmailCode("ACCOUNT_BINDING")}},model:{value:t.captchaDisabled,callback:function(e){t.captchaDisabled=e},expression:"captchaDisabled"}})],1)]),a("button",{staticClass:"primary-btn",on:{click:function(e){t.bindingOneDo("EMAIL")}}},[t._v(t._s(t.$t("message.PopBindBtn")))]),a("p",[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.phoneBind=!0,t.registerEmailAccount=!1}}},[t._v(t._s(t.$t("message.PopBindPhone")))])])]),a("mu-dialog",{staticClass:"register-accout",attrs:{open:t.confirmAccountNotExist,"append-body":!1},on:{"update:open":function(e){t.confirmAccountNotExist=e}}},[a("h4",[t._v(t._s(t.$t("message.PopBindAccount")))]),a("div",{staticClass:"input-wrap",staticStyle:{width:"338px"}},[a("label",[t._v(t._s(t.$t("message.PopPassword")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.loginPwd,expression:"formData.loginPwd"}],attrs:{type:"password",placeholder:t.$t("message.PopPasswordPlaceholder")},domProps:{value:t.formData.loginPwd},on:{input:function(e){e.target.composing||t.$set(t.formData,"loginPwd",e.target.value)}}})]),a("div",{staticClass:"input-wrap",staticStyle:{width:"338px"}},[a("label",[t._v(t._s(t.$t("message.PopPasswordConfirm")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.loginPwd2,expression:"formData.loginPwd2"}],attrs:{type:"password",placeholder:t.$t("message.PopPassword2Placeholder")},domProps:{value:t.formData.loginPwd2},on:{input:function(e){e.target.composing||t.$set(t.formData,"loginPwd2",e.target.value)}}})]),a("button",{staticClass:"primary-btn",on:{click:function(e){t.bindingTwoDo("PHONE")}}},[t._v(t._s(t.$t("message.PopConfirm")))])]),a("mu-dialog",{staticClass:"register-accout",attrs:{open:t.resetPassDialog,"append-body":!1},on:{"update:open":function(e){t.resetPassDialog=e}}},[a("h4",[t._v(t._s(t.$t("message.PopResetPass")))]),a("div",{staticClass:"input-wrap"},[a("p",[t._v(t._s(t.$t("message.PopAccount"))+": "+t._s(t.currentAddr.userName))])]),a("div",{staticClass:"input-wrap"},[a("label",[t._v(t._s(t.$t("message.PopGraphic")))]),a("div",{staticClass:"input-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.picCode,expression:"formData.picCode"}],attrs:{type:"text",placeholder:t.$t("message.PopGraphicEnter")},domProps:{value:t.formData.picCode},on:{input:function(e){e.target.composing||t.$set(t.formData,"picCode",e.target.value)}}}),a("img",{ref:"imgcode",attrs:{src:t.$window.SERVERPATH+"/open/pic_captcha?type=REGISTER&macCode=macCode",alt:""},on:{click:t.getImgCode}})])]),a("div",{staticClass:"input-wrap"},[a("label",[t._v(t._s(t.$t("message.PopCaptcha")))]),a("div",{staticClass:"input-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.resetCaptcha,expression:"formData.resetCaptcha"}],attrs:{type:"text",placeholder:t.$t("message.PopInputCaptcha")},domProps:{value:t.formData.resetCaptcha},on:{input:function(e){e.target.composing||t.$set(t.formData,"resetCaptcha",e.target.value)}}}),a("a",{attrs:{href:"javascript:;"},on:{click:t.getSMScode}},[t._v(t._s(t.formData.btnText))])])]),a("div",{staticClass:"input-wrap"},[a("label",[t._v(t._s(t.$t("message.PopNewPassword")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.resetLoginPwd,expression:"formData.resetLoginPwd"}],attrs:{type:"password",placeholder:t.$t("message.PopPasswordPlaceholder")},domProps:{value:t.formData.resetLoginPwd},on:{input:function(e){e.target.composing||t.$set(t.formData,"resetLoginPwd",e.target.value)}}})]),a("div",{staticClass:"input-wrap"},[a("label",[t._v(t._s(t.$t("message.PopPasswordConfirm")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.resetLoginPwd2,expression:"formData.resetLoginPwd2"}],attrs:{type:"password",placeholder:t.$t("message.PopPassword2Placeholder")},domProps:{value:t.formData.resetLoginPwd2},on:{input:function(e){e.target.composing||t.$set(t.formData,"resetLoginPwd2",e.target.value)}}})]),a("button",{staticClass:"primary-btn",on:{click:t.passResetDo}},[t._v(t._s(t.$t("message.PopConfirmChange")))])]),a("FooterBar",{ref:"ft"})],1)},o=[],i=(a("ac6a"),a("c93e")),n=a("fca0"),r=a("348c"),c=a("1720"),p=a("052d"),m=a("2f62"),d={data:function(){return{phoneBind:!1,registerEmailAccount:!1,confirmAccountExist:!1,confirmAccountNotExist:!1,resetPassDialog:!1,prefixs:["+86","+852","+853","+886","+8801","+8802","+001","+44","+0061"],prefixMenu:!1,formData:{phone:"",prefix:"+86",captcha:"",picCode:"",loginPwdCheck:"",loginPwd:"",loginPwd2:"",s:60,btnText:this.$t("message.PopGetCaptcha"),timer:null,email:"",emailCaptcha:"",resetCaptcha:"",resetLoginPwd:"",resetLoginPwd2:"",bindingType:"PHONE"},pageData:{isBind:!1,haveTrustee:!1,MetaMaskAddress:[]},captchaDisabled:!1}},watch:{currentAddr:function(){this.pageData={isBind:!1,haveTrustee:!1,MetaMaskAddress:[]},this.getAssets()}},mounted:function(){this.getAssets()},computed:Object(i["a"])({},Object(m["c"])({currentAddr:function(t){return t.user.currentAddr},storeWeb3:function(t){return t.web3Handler.web3}})),components:{HeaderBar:n["a"],FooterBar:r["a"],AEFcountDownBtn:c["a"]},methods:Object(i["a"])({getImgCode:function(t){this.$refs.imgcode.src=this.$window.SERVERPATH+"/open/pic_captcha?type="+t+"&macCode=macCode&"+Math.random()},getSMScode:function(t){var e=this;this.verifyPhone()&&this.verifyPicCode()&&(this.registerSMScountDown(),this.$http.post("/open/captcha",{macCode:"macCode",picCode:this.formData.picCode,phone:this.formData.phone,prefix:this.formData.prefix,type:t}).then(function(t){console.log(t),200!=t.code&&(clearTimeout(e.formData.timer),e.formData.btnText=e.$t("message.PopGetCaptcha"))}).catch(function(t){clearTimeout(e.formData.timer),e.formData.btnText=e.$t("message.PopGetCaptcha")}))},getEmailCode:function(t){var e=this;this.verifyEmail()&&this.verifyPicCode()&&(this.captchaDisabled=!0,this.$http.get("/open/email_captcha",{params:{email:this.formData.email,picCode:this.formData.picCode,captchaType:t}}).then(function(t){console.log(t),200!=t.code&&(e.captchaDisabled=!1)}).catch(function(t){e.captchaDisabled=!1}))},registerSMScountDown:function(){this.formData.s>0?(this.formData.s--,this.formData.btnText=this.formData.s+"s",this.formData.timer=setTimeout(this.registerSMScountDown,1e3)):(this.formData.s=60,this.formData.btnText=this.$t("message.PopGetCaptcha"))},bindingOneDo:function(t){var e=this;this.formData.bindingType=t;var a={account:this.formData.phone,bindingType:t,captcha:this.formData.captcha};if("PHONE"==t){if(!this.verifyPhone()||!this.verifyCaptcha())return}else{if(!this.verifyEmail()||!this.verifyCaptcha())return;a.account=this.formData.email}this.$http.post("/app/user/binding",a).then(function(t){200==t.code&&(e.phoneBind=!1,t.result?e.web3BindAddress(t.result):e.confirmAccountNotExist=!0)})},bindingTwoDo:function(){var t=this,e=this.formData.bindingType,a={account:this.formData.phone,password:Object(p["a"])(this.formData.loginPwd)};if("PHONE"==e){if(!this.verifyPhone()||!this.verifyCaptcha())return}else if(!this.verifyEmail()||!this.verifyCaptcha())return;this.verifyPassword()&&this.$http.post("/app/user/binding_two",a).then(function(e){t.phoneBind=!1,console.log(e),200==e.code&&e.result&&(t.confirmAccountNotExist=!1,t.web3BindAddress(e.result))})},passResetDo:function(){var t=this;""!=this.formData.resetCaptcha?""!=this.formData.resetLoginPwd?""!=this.formData.resetLoginPwd2?this.formData.resetLoginPwd==this.formData.resetLoginPwd2?this.$http.post("/app/user/password",{captcha:this.formData.resetCaptcha,pwd:Object(p["a"])(this.formData.resetLoginPwd)}).then(function(e){console.log(e),200==e.code&&(t.alert({type:"success",msg:e.msg}),t.resetPassDialog=!1)}):this.alert({type:"info",msg:this.$t("message.PopPassDiff")}):this.alert({type:"info",msg:this.$t("message.PopPass2Empty")}):this.alert({type:"info",msg:this.$t("message.PopPassEmpty")}):this.alert({type:"info",msg:this.$t("message.PopCaptchaEmpty")})},getAssets:function(){var t=this;this.$http.get("/app/user/assets").then(function(e){if(200==e.code){var a=e.result.assets;a.length>1&&(t.pageData.isBind=!0),a.forEach(function(e){"IMPORT"==e.platform?t.pageData.MetaMaskAddress.push(e):t.pageData.haveTrustee=!0})}})},verifyPhone:function(){return!(""==this.formData.phone||!/^[0-9]*$/.test(this.formData.phone))||(this.alert({type:"info",msg:this.$t("message.PopPhoneWrong")}),!1)},verifyPicCode:function(){return""!=this.formData.picCode||(this.alert({type:"info",msg:this.$t("message.PopGraphicEmpty")}),!1)},verifyCaptcha:function(){return""!=this.formData.captcha||(this.alert({type:"info",msg:this.$t("message.PopCaptchaEmpty")}),!1)},verifyPassword:function(){var t=/^[a-zA-Z]\w{7,12}$/;return t.test(this.formData.loginPwd)?this.formData.loginPwd===this.formData.loginPwd2||(this.alert({type:"info",msg:this.$t("message.PopPassDiff")}),!1):(this.alert({type:"info",msg:this.$t("message.PopPassRequest")}),!1)},verifyEmail:function(){return!(""==this.formData.email||!/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(this.formData.email))||(this.alert({type:"info",msg:"邮箱输入有误"}),!1)},web3BindAddress:function(t){var e=this;this.storeWeb3.apiHandle.methods.bindAddress(t).send({from:this.currentAddr.coinAddress}).on("receipt",function(t){e.alert({type:"success",msg:this.$t("message.Popsuccess")})}).on("error",function(t){e.alert({type:"error",msg:this.$t("message.PopFail")})})}},Object(m["b"])({changeLanguage:"CHANGE_LANGUAGE",alert:"alert"}))},l=d,u=(a("d384"),a("2877")),f=Object(u["a"])(l,s,o,!1,null,null,null);f.options.__file="Account-security.vue";e["default"]=f.exports},d384:function(t,e,a){"use strict";var s=a("f9fa"),o=a.n(s);o.a},f9fa:function(t,e,a){}}]);