(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-713dba30"],{"01d0":function(t,e,s){t.exports=s.p+"img/fk.c05e6ebd.png"},"0f03":function(t,e,s){t.exports=s.p+"img/ht.a00fb80e.png"},"2d10":function(t,e,s){},"596b":function(t,e,s){t.exports=s.p+"img/hongtao.d12e4b74.png"},"7fed":function(t,e,s){t.exports=s.p+"img/mh.75f09ed1.png"},9695:function(t,e,s){"use strict";var i=s("2d10"),n=s.n(i);n.a},af09:function(t,e,s){t.exports=s.p+"img/kj_poker.97f66aee.png"},f2df:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"roker-page"},[s("HeaderBar"),s("div",{staticClass:"main",style:{minHeight:t.$window.innerHeight-150+"px"}},[s("Bet"),s("Record")],1),s("FooterBar")],1)},n=[],o=(s("cadf"),s("551c"),s("097d"),s("fca0")),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"module-roker-bet"},[i("div",{staticClass:"content-wrap"},[t._m(0),i("div",{staticClass:"view-btm"},[i("div",{staticClass:"poker-area"},[i("ul",t._l(13,function(t,e){return i("li",{key:e},[i("img",{attrs:{src:"img/poker/poker_"+t+".png",alt:""}})])}))]),t._m(1)])]),i("div",{staticClass:"bet-handler"},[i("div",{ref:"gameContent",staticClass:"game-content"},[i("div",{staticClass:"ctn-top"},[i("div",{staticClass:"bet-input"},[i("p",[t._v(t._s(t.$t("message.GameBetAmount")))]),i("div",{staticClass:"flex-wrap"},[i("div",{staticClass:"input-wrap"},[i("label",{class:{eth:"ETH"==t.coinType,trx:"TRX"==t.coinType}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"text",oninput:"value=value.replace(/[^0-9\\.]/g,'')",onkeyup:"value=value.replace(/[^0-9\\.]/g,'')",onpaste:"value=value.replace(/[^0-9\\.]/g,'')"},domProps:{value:t.amount},on:{blur:t.inputAmountBlur,input:function(e){e.target.composing||(t.amount=e.target.value)}}}),i("span",[t._v(t._s(t.coinType))])]),i("div",{staticClass:"hotkeys"},[i("span",{on:{click:function(e){t.onHotkeys(2)}}},[t._v("2X")]),i("span",{on:{click:function(e){t.onHotkeys(.5)}}},[t._v("1/2")]),i("span",{on:{click:function(e){t.onHotkeys("min")}}},[t._v("MIN")]),i("span",{on:{click:function(e){t.onHotkeys("max")}}},[t._v("MAX")])])])]),i("div",{staticClass:"award"},[i("p",[t._v(t._s(t.$t("message.GamePlayOutWin")))]),i("div",[i("img",{directives:[{name:"show",rawName:"v-show",value:"ETH"==t.coinType,expression:"coinType == 'ETH'"}],attrs:{src:s("1eb1"),alt:""}}),i("img",{directives:[{name:"show",rawName:"v-show",value:"TRX"==t.coinType,expression:"coinType == 'TRX'"}],attrs:{src:s("1d0a"),alt:""}}),i("span",[t._v(t._s(t.bonus))]),i("i",[t._v(t._s(t.coinType))])])])]),i("div",{staticClass:"ctn-btm"},[i("div",{staticClass:"bet-wrap"},[i("span",{staticClass:"fl nominscreen"},[i("img",{directives:[{name:"show",rawName:"v-show",value:"ETH"==t.coinType,expression:"coinType == 'ETH'"}],attrs:{src:s("1eb1")}}),i("img",{directives:[{name:"show",rawName:"v-show",value:"TRX"==t.coinType,expression:"coinType == 'TRX'"}],attrs:{src:s("1d0a")}}),t.currentAddr.token&&t.currentAddr.assets?i("i",[i("DigitalRoll",{attrs:{value:1*t.currentAddr.assets[t.coinType].amount}})],1):i("i",[t._v("0")]),t._v(" "+t._s(t.coinType))]),i("button",{staticClass:"enter"},[t._v("投注")]),i("span",{staticClass:"fl minscreen"},[i("img",{directives:[{name:"show",rawName:"v-show",value:"ETH"==t.coinType,expression:"coinType == 'ETH'"}],attrs:{src:s("1eb1")}}),i("img",{directives:[{name:"show",rawName:"v-show",value:"TRX"==t.coinType,expression:"coinType == 'TRX'"}],attrs:{src:s("1d0a")}}),t.currentAddr.token&&t.currentAddr.assets?i("i",[i("DigitalRoll",{attrs:{value:1*t.currentAddr.assets[t.coinType].amount}})],1):i("i",[t._v("0")]),t._v(" "+t._s(t.coinType))]),i("span",{staticClass:"fr"},[i("img",{attrs:{src:s("8960")}}),t.userInfo.token?i("i",[i("DigitalRoll",{attrs:{value:1*t.currentAddr.bet}})],1):i("i",[t._v("0")]),t._v(" AB")])])]),t.rule.winDig?i("div",{staticClass:"dig-wrap"},[i("img",{attrs:{src:s("fcaa"),alt:""}}),i("div",{staticClass:"content"},[i("p",[t._v(t._s(t.$t("message.GameBetToGet"))+" "+t._s(Math.floor(t.rule.winDig.split(":")[1]/t.rule.winDig.split(":")[0]*t.amount))+" AB")]),i("span",[t._v(t._s(t.$t("message.GameDigProportion"))+"　 WIN "+t._s(t.rule.winDig.split(":")[0])+" : "+t._s(t.rule.winDig.split(":")[1])+" 　  LOSE "+t._s(t.rule.failDig.split(":")[0])+" : "+t._s(t.rule.failDig.split(":")[1]))])]),i("i",{staticClass:"help nominscreen",on:{click:function(e){t.isShowABpopup=!0}}}),i("i",{staticClass:"help minscreen",on:{click:function(e){t.$router.push("ab")}}})]):t._e()])])])},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"view-top"},[i("div",{staticClass:"number-area"},[i("div",{staticClass:"watermark"},[i("span",[t._v("数字")]),i("span",[t._v("投注区")])])]),i("div",{staticClass:"kj-area"},[i("div",{staticClass:"odds"},[i("h3",[t._v("开奖区")]),i("div",[i("label",[t._v("投注赔率")]),i("span",[t._v("2.59x")])])]),i("div",{staticClass:"poker"},[i("img",{attrs:{src:s("af09"),alt:""}})])]),i("div",{staticClass:"hs-area"},[i("div",{staticClass:"watermark"},[i("span",[t._v("花色")]),i("span",[t._v("投注区")])])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hs-area"},[i("ul",[i("li",[i("img",{attrs:{src:s("01d0"),alt:""}})]),i("li",[i("img",{attrs:{src:s("0f03"),alt:""}})]),i("li",[i("img",{attrs:{src:s("596b"),alt:""}})]),i("li",[i("img",{attrs:{src:s("7fed"),alt:""}})])])])}],u=(s("c5f6"),s("be94")),l=s("14b5"),c=s("2f62"),m=(s("b253"),s("938b")),d=s("bbcb"),h=s("6d7d"),p=s("4d2c"),f={props:{diceStatistics:{type:Object,default:function(){return{earned:"",guessCount:"",newcomers:[]}}}},data:function(){return{amount:.1,odds:50,rule:{},luckyColor:"green",luckyNum:"00",timer:null,getBetResultTimer:null,maxNum:96,isShowHelp:!1,openWeixinQR:!1,autoBet:!1,isShowABpopup:!1,isShowFundraiy:!1,scroll:null}},created:function(){this.getRule(),window.hd={}},mounted:function(){this.setBetInfo({diceList:this.diceList,amount:this.amount}),window.onmouseup=function(){window.onmousemove=null},window.ontouchend=function(){window.ontouchmove=null},this.setBetInfo({odds:1}),"TRX"==this.coinType&&this.$IsPC()?this.isShowFundraiy=!0:"TRX"!=this.coinType||this.$IsPC()||"YES"==sessionStorage.getItem("IsFirstEnter")||(this.$router.push("mobile-fundraiy"),sessionStorage.setItem("IsFirstEnter","YES"))},methods:Object(u["a"])({inputAmountBlur:function(){this.amount<this.rule.minInvest&&(this.amount=this.rule.minInvest),this.amount>this.rule.maxInvest&&(this.amount=this.rule.maxInvest)},luckyRun:function(){var t=this;clearInterval(this.timer),this.timer=null,this.timer=setInterval(function(){t.luckyNum=Math.floor(89*Math.random())+10,t.luckyColor=["green","red","golden"][Math.floor(2*Math.random())]},50)},onHotkeys:function(t){switch(t){case"max":this.amount=this.rule.maxInvest;break;case"min":this.amount=this.rule.minInvest;break;case.5:this.amount=.5*this.amount<this.rule.minInvest?this.rule.minInvest:.5*this.amount;break;case 2:this.amount=2*this.amount>this.rule.maxInvest?this.rule.maxInvest:2*this.amount;break;default:this.amount=t;break}},onAdd:function(){this.amount=(Number(this.amount)+.01).toFixed(2)},onMinus:function(){this.amount=(Number(this.amount)-.01).toFixed(2),this.amount<.01&&(this.amount=.01)}},Object(c["b"])({setBetInfo:"SET_ROLLER_BET_INFO",alert:"alert",openLogin:"OPEN_LOGIN",openWinPopup:"OPEN_WIN_POPUP",openConfirm:"OPEN_CONFIRM",closePopup:"CLOSE_POPUP",changeCoinType:"CHANGE_COINTYPE"}),{onHandleClick:function(t){var e=t.offsetX,s=this.$refs.slider.clientWidth/100*(100-this.maxNum),i=this.$refs.slider.clientWidth-s-20;e=e<=2?2:e>=i?i:e,this.$refs.handle.style.left=e-9+"px",this.$refs.bar.style.width=e+10+"px",this.odds=(e/(i/this.maxNum)).toFixed(2)<2?2:(e/(i/this.maxNum)).toFixed(),this.setBetInfo({odds:this.odds,amount:this.amount})},onHandleMouseD:function(t){var e=this,s=this.$refs.slider.offsetLeft+this.$refs.gameContent.offsetLeft,i=this.$refs.slider.clientWidth/100*(100-this.maxNum),n=this.$refs.slider.clientWidth-i-20,o=t.offsetX,a=0;window.onmousemove=function(t){a=t.clientX-s-o,a=a<=2?2:a>=n?n:a,e.$refs.handle.style.left=a-9+"px",e.$refs.bar.style.width=a+10+"px",e.odds=(a/(n/e.maxNum)).toFixed(2)<2?2:(a/(n/e.maxNum)).toFixed(),e.setBetInfo({odds:e.odds,amount:e.amount})}},onHandleTouchS:function(t){var e=this,s=this.$refs.slider.offsetLeft+this.$refs.gameContent.offsetLeft,i=this.$refs.slider.clientWidth/100*(100-this.maxNum),n=this.$refs.slider.clientWidth-i-20,o=(t.touches[0].clientX,this.$refs.handle.offsetLeft,0);window.ontouchmove=function(t){o=t.touches[0].clientX-s,o=o<=2?2:o>=n?n:o,e.$refs.handle.style.left=o-9+"px",e.$refs.bar.style.width=o+10+"px",e.odds=(o/(n/e.maxNum)).toFixed(2)<2?2:(o/(n/e.maxNum)).toFixed(),e.setBetInfo({odds:e.odds,amount:e.amount})}},getRule:function(){var t=this;this.$http.get("/app/dice/rule",{params:{coinAddress:this.currentAddr.coinAddress||"",coinType:this.coinType}}).then(function(e){200==e.code&&(t.rule=e.result,t.amount=e.result.minInvest,t.luckyNum=e.result.lastLucky||"00")})},betDo:function(){var t=this,e=this;/^\d+(\.\d+)?$/.test(this.amount)?this.amount>this.currentAddr.assets[this.coinType].amount?this.alert({type:"info",msg:this.$t("message.assetsNotEnough")}):Number(this.amount)<this.rule.minInvest?this.alert({type:"info",msg:this.$t("message.GameAmountTooLow")+this.rule.minInvest+this.coinType}):1*this.amount>1*this.rule.maxInvest?this.alert({type:"info",msg:this.$t("message.GameAmountTooLarge")+this.rule.maxInvest+this.coinType}):this.$http.post("/app/dice/dice",{coinAddress:this.currentAddr.assets[this.coinType].coinAddress,coinAmount:this.amount,guessNum:this.odds}).then(function(s){if(200==s.code)if("DISPATCHER"==s.result.resultType)t.alert({type:"success",msg:s.msg}),t.luckyRun(),e.getBetResult(s.result.recdId);else{switch(t.alert({type:"info",msg:"Please Wait For Wallet to ConfirmTransfer...",timeout:9999999}),s.result.coinType){case"ETH":t.placeBet(t.odds,100,s.result.commitLastBlock,s.result.commit,s.result.signData,t.amount,s.result.recdId);break;case"TRX":t.placeBetTRX(t.odds,s.result.recdId,t.amount);break}window.hd.betFailed=function(t){e.alert({type:"info",msg:"User rejected the signature request.",timeout:3e3})},window.hd.betSuccess=function(t){e.alert({type:"info",msg:"Successful bet.",timeout:9999999}),e.luckyRun(),e.getBetResult(s.result.recdId)}}}):this.alert({type:"info",msg:this.$t("message.GameAmountErr")})},placeBet:function(t,e,s,i,n,o,a){var r=this;o=this.web3.web3Instance.utils.toWei(o+"","ether"),this.web3.diceApiHandle.methods.placeBetV1(t,e,s,i,n).send({from:this.currentAddr.coinAddress,value:o,gas:21e4,gasPrice:1e10},function(t,e){t||r.alert({type:"info",msg:"Bet submitted! Waiting for Ethereum...",timeout:9999999})}).then(function(t){r.alert({type:"info",msg:"Successful bet.",timeout:9999999}),r.getBetResult(a)}).catch(function(t){r.alert({type:"info",msg:"User rejected the signature request.",timeout:3e3})})},placeBetTRX:function(t,e,s){var i=this,n=this.tronWeb.tronWebInstance.toSun(10),o=this.tronWeb.tronWebInstance.toSun(s);this.tronWeb.contract.placeBetV1(t,100,e).send({feeLimit:n,callValue:o,shouldPollResponse:!1}).then(function(t){i.alert({type:"info",msg:"Bet submitted! Waiting for Tron...",timeout:9999999}),i.getBetResult(e)}).catch(function(t){i.alert({type:"info",msg:t,timeout:3e3})})},getBetResult:function(t){var e=this;clearInterval(this.getBetResultTimer),this.getBetResultTimer=null,this.getBetResultTimer=setInterval(function(){Object(m["a"])({type:"get",url:"/app/dice/dice/"+t,data:{}}).then(function(t){200==t.code?"WAITING_SETTLE"==t.result.tradeStatus?e.alert({type:"info",msg:"Successful bet.",timeout:9999999}):"DONE"!=t.result.tradeStatus&&"FAIL"!=t.result.tradeStatus||(clearInterval(e.timer),e.timer=null,clearInterval(e.getBetResultTimer),e.getBetResultTimer=null,e.luckyColor="green","DONE"==t.result.tradeStatus?(e.$store.commit("closeAlert"),e.luckyNum=t.result.luckyNum,e.$store.dispatch("updateProperty"),"WIN"==t.result.winFlag?e.openWinPopup({ab:t.result.abNum,rewards:t.result.rewards,coinType:t.result.coinType}):"LOSE"==t.result.winFlag&&e.noWin(t.result.abNum),setTimeout(function(){e.autoBet&&e.userInfo.token&&(e.closePopup(),e.betDo())},1e3)):e.alert({type:"info",msg:"Frustrated bet."})):(clearInterval(e.timer),e.timer=null,clearInterval(e.getBetResultTimer),e.getBetResultTimer=null,e.luckyNum="00",e.luckyColor="green")}).catch(function(t){clearInterval(e.timer),e.timer=null,clearInterval(e.getBetResultTimer),e.getBetResultTimer=null,e.luckyColor="green",e.luckyNum="00"})},1e3)},noWin:function(t){var e=this;this.openConfirm({content:this.$t("message.GameNoWin"),other:this.$t("message.GameWinBox2")+t+"AB",btn:[{type:"high",text:this.$t("message.GameWinBox3"),cb:function(){e.$router.push("roller")}}]})},openFundraiy:function(){"TRX"==this.coinType&&this.$IsPC()?this.isShowFundraiy=!0:"TRX"!=this.coinType||this.$IsPC()||(this.$router.push("mobile-fundraiy"),sessionStorage.setItem("IsFirstEnter","YES"))}}),watch:{diceList:{handler:function(t,e){this.setBetInfo({diceList:t,amount:this.amount})},deep:!0},amount:function(t,e){this.setBetInfo({odds:this.odds,amount:t})},coinType:function(){this.getRule()}},computed:Object(u["a"])({},Object(c["c"])({web3:function(t){return t.web3Handler.web3},currentAddr:function(t){return t.user.currentAddr},userInfo:function(t){return t.user.userInfo},coinType:function(t){return t.user.coinType},tronWeb:function(t){return t.tronHandler.tronWeb}}),{peilv:function(){return 98.5/((1*this.odds).toFixed()-1)},bonus:function(){return this.amount*this.peilv*.01<=3e-4?Math.floor(1e3*(this.amount*this.peilv-3e-4))/1e3<0?0:Math.floor(1e3*(this.amount*this.peilv-3e-4))/1e3:Math.floor(this.amount*this.peilv*.99*1e3)/1e3<0?0:Math.floor(this.amount*this.peilv*.99*1e3)/1e3}}),components:{DigitalRoll:l["a"],AbPopup:d["a"],FundraiyPopup:h["a"],GameHelpPopup:p["a"]},destroyed:function(){clearInterval(this.timer),this.timer=null,this.luckyColor="green",this.luckyNum="00",this.autoBet=!1}},v=f,g=(s("9695"),s("2877")),y=Object(g["a"])(v,a,r,!1,null,null,null);y.options.__file="bet.vue";var b=y.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"module-roker-record"})},T=[],_={},I=Object(g["a"])(_,w,T,!1,null,null,null);I.options.__file="record.vue";var k=I.exports,x=s("348c"),C={components:{HeaderBar:o["a"],Bet:b,Record:k,FooterBar:x["a"]}},B=C,N=Object(g["a"])(B,i,n,!1,null,null,null);N.options.__file="Roker.vue";e["default"]=N.exports}}]);